{% load kindeditor %}
<textarea name="{{ widget.name }}"{% include 'kindeditor/attrs.html' %}>
{% if widget.value %}{{ widget.value }}{% endif %}</textarea>
<script type="text/javascript">
    KindEditor.ready(function (K) {
        var target = '#' + '{{ widget.attrs.id }}';
        var config = {{ widget.config|convert_to_json }};

        config.afterCreate = function () {
            this.sync()
        };
        config.afterChange = function () {
            this.sync()
        };
        config.afterBlur = function () {
            this.sync()
        };
        window.editor = K.create(target, config);
    });
</script>